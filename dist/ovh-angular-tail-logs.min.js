/*! ovh-angular-tail-logs - 1.1.0 - 2017-06-21 */
angular.module("ovh-tail-logs",["luegg.directives"]),angular.module("ovh-tail-logs").component("ovhTailLogs",{templateUrl:"ovh-angular-tail-logs.html",transclude:!0}),function(){"use strict";angular.module("ovh-tail-logs").factory("OvhTailLogs",["$q","$timeout","$http",function(a,b,c){var d=function(b){var c=b.source||angular.noop;this.logs=[],this.delay=b.delay||1e3,this.__getFuncSource=function(){return a.when(c())},this.source=this.__getFuncSource().then(function(a){return a})};return d.prototype.log=function(){var a=this;return a.source.then(function(a){return c.get(a+"&sort=asc&limit=1000")}).then(function(b){var c=a.logs;return c.push(b.data.messages),a.logs=_.uniq(_.flatten(c),function(a){return a.message._id}),a.logs})["catch"](function(b){if(410===b.status)return a.source=a.__getFuncSource(),a.source.then(function(){return a.log()})})["finally"](function(){return a.timer=b(function(){a.log.call(a)},a.delay),a.logs})},d.prototype.stop=function(){var c=this;return c.timer&&b.cancel(c.timer),a.when(c)},d}])}(),angular.module("ovh-tail-logs").run(["$templateCache",function(a){"use strict";a.put("ovh-angular-tail-logs.html","<div class=ovh-tail-logs data-scroll-glue><div data-ng-transclude></div><i class=ovh-tail-logs__cursor></div>")}]);